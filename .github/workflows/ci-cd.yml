name: HealthBot CI/CD

on:
  push:
    branches: [ master ]

jobs:
  smart-validation:
    runs-on: ubuntu-latest
    timeout-minutes: 2
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.10"

    - name: Install only core deps
      run: |
        pip install flask python-dotenv colorama
        echo "âœ… Core dependencies installed"

    - name: Validate Python syntax
      run: |
        echo "ğŸ” Checking Python syntax..."
        python -m py_compile app.py
        python -m py_compile health_alerts.py
        python -m py_compile kafka_service.py
        echo "âœ… All Python files have valid syntax!"

    - name: Test basic imports
      run: |
        echo "ğŸ“¦ Testing imports..."
        python -c "import flask; print('âœ… Flask OK')"
        python -c "from dotenv import load_dotenv; print('âœ… dotenv OK')"
        python -c "import colorama; print('âœ… Colorama OK')"
        echo "âœ… All core imports work!"

    - name: HealthBot Ready
      run: |
        echo "ğŸ‰ HEALTHBOT VALIDATION PASSED!"
        echo "âœ… Code syntax: Valid"
        echo "âœ… Core imports: Working"
        echo "âœ… Dependencies: Installed"
        echo "ğŸš€ Ready for development!"