name: HealthBot CI/CD Pipeline

on:
  push:
    branches: [ master ]

jobs:
  debug-imports:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Set up Python 3.10
      uses: actions/setup-python@v4
      with:
        python-version: "3.10"

    - name: Install dependencies
      run: |
        pip install -r requirements.txt

    - name: Test each import separately
      run: |
        echo "=== TESTING IMPORTS ONE BY ONE ==="
        
        echo "1. Testing Flask..."
        python -c "import flask; print('✅ FLASK SUCCESS')" || echo "❌ FLASK FAILED"
        
        echo "2. Testing OpenAI..."
        python -c "import openai; print('✅ OPENAI SUCCESS')" || echo "❌ OPENAI FAILED"
        
        echo "3. Testing python-dotenv..."
        python -c "from dotenv import load_dotenv; print('✅ DOTENV SUCCESS')" || echo "❌ DOTENV FAILED"
        
        echo "4. Testing Colorama..."
        python -c "import colorama; print('✅ COLORAMA SUCCESS')" || echo "❌ COLORAMA FAILED"
        
        echo "=== IMPORT TESTING COMPLETED ==="

    - name: Check what's installed
      run: |
        echo "=== INSTALLED PACKAGES ==="
        pip list | grep -E "(flask|openai|dotenv|colorama)"